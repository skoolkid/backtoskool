<!DOCTYPE html>
<html>
<head>
<title>Back to Skool: Routine at 25026</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Back to Skool" src="../../images/logo-dec.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="25012.html">25012</a>
</td>
<td class="up">Up: <a href="../maps/all.html#25026">Map</a></td>
<td class="next">
Next: <a href="25080.html">25080</a>
</td>
</tr>
</table>
<div class="description">25026: Scroll the screen left 8 columns</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="28160.html">28160</a> and <a href="62910.html">62910</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="25026"></span>25026</td>
<td class="instruction">LD B,8</td>
<td class="comment-1" rowspan="1">8 columns will be scrolled on</td>
</tr>
<tr>
<td class="address-2"><span id="25028"></span>25028</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Save the column counter</td>
</tr>
<tr>
<td class="address-1"><span id="25029"></span>25029</td>
<td class="instruction">LD HL,22529</td>
<td class="comment-1" rowspan="4">First shift the attributes one place to the left</td>
</tr>
<tr>
<td class="address-1"><span id="25032"></span>25032</td>
<td class="instruction">LD DE,22528</td>
</tr>
<tr>
<td class="address-1"><span id="25035"></span>25035</td>
<td class="instruction">LD BC,671</td>
</tr>
<tr>
<td class="address-1"><span id="25038"></span>25038</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="25040"></span>25040</td>
<td class="instruction">CALL <a href="63553.html">63553</a></td>
<td class="comment-1" rowspan="1">Scroll the display file one character square to the left</td>
</tr>
<tr>
<td class="address-1"><span id="25043"></span>25043</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="2">Adjust the leftmost column of the play area now on screen (held at <a href="32767.html">32767</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="25044"></span>25044</td>
<td class="instruction">LD (32767),A</td>
</tr>
<tr>
<td class="address-1"><span id="25047"></span>25047</td>
<td class="instruction">LD HL,5151</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=20 (bottom row of the screen), <span class="register">L</span>=31 (column at the far right)</td>
</tr>
<tr>
<td class="address-2"><span id="25050"></span>25050</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="25051"></span>25051</td>
<td class="instruction">CALL <a href="24684.html">24684</a></td>
<td class="comment-1" rowspan="1">Print the play area character square at row <span class="register">H</span>, column <span class="register">L</span>=31</td>
</tr>
<tr>
<td class="address-1"><span id="25054"></span>25054</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="25055"></span>25055</td>
<td class="instruction">DEC H</td>
<td class="comment-1" rowspan="1">Next row up</td>
</tr>
<tr>
<td class="address-1"><span id="25056"></span>25056</td>
<td class="instruction">JP P,25050</td>
<td class="comment-1" rowspan="1">Jump back until all 21 squares in the column have been printed</td>
</tr>
<tr>
<td class="address-1"><span id="25059"></span>25059</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore the column counter to <span class="register">B</span></td>
</tr>
<tr>
<td class="address-1"><span id="25060"></span>25060</td>
<td class="instruction">DJNZ 25028</td>
<td class="comment-1" rowspan="1">Jump back until 8 columns have been scrolled on</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="25062"></span>
<div class="comments">
<div class="paragraph">
The screen has been scrolled left 8 columns. Check whether any of the minor characters may be teleported without us noticing.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="25062"></span>25062</td>
<td class="instruction">LD A,(32767)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=leftmost column of the play area on screen</td>
</tr>
<tr>
<td class="address-1"><span id="25065"></span>25065</td>
<td class="instruction">LD B,5</td>
<td class="comment-1" rowspan="2">5 little boys, starting with 193=little boy no. 4</td>
</tr>
<tr>
<td class="address-1"><span id="25067"></span>25067</td>
<td class="instruction">LD H,193</td>
</tr>
<tr>
<td class="address-1"><span id="25069"></span>25069</td>
<td class="instruction">CP 120</td>
<td class="comment-1" rowspan="1">Is the skool gate in the middle of the screen?</td>
</tr>
<tr>
<td class="address-1"><span id="25071"></span>25071</td>
<td class="instruction">JR Z,<a href="25080.html#25134">25134</a></td>
<td class="comment-1" rowspan="1">Jump if so (to consider teleporting little boys 4-8)</td>
</tr>
<tr>
<td class="address-1"><span id="25073"></span>25073</td>
<td class="instruction">CP 80</td>
<td class="comment-1" rowspan="1">Is the boys' skool door in the middle of the screen?</td>
</tr>
<tr>
<td class="address-1"><span id="25075"></span>25075</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Return if not</td>
</tr>
<tr>
<td class="address-1"><span id="25076"></span>25076</td>
<td class="instruction">LD H,190</td>
<td class="comment-1" rowspan="1">190=little boy no. 1</td>
</tr>
<tr>
<td class="address-1"><span id="25078"></span>25078</td>
<td class="instruction">JR <a href="25080.html#25132">25132</a></td>
<td class="comment-1" rowspan="1">Consider teleporting little boys 1-3</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="25012.html">25012</a>
</td>
<td class="up">Up: <a href="../maps/all.html#25026">Map</a></td>
<td class="next">
Next: <a href="25080.html">25080</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Back to Skool RAM disassembly 20200811</div>
<div class="copyright">&#169; 1985 Microsphere Computer Services Ltd. &#169; 2020 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.2.</div>
<div><a href="../../asm/61C2.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>