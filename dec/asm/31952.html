<!DOCTYPE html>
<html>
<head>
<title>Back to Skool: Routine at 31952</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Back to Skool" src="../../images/logo-dec.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="31915.html">31915</a>
</td>
<td class="up">Up: <a href="../maps/all.html#31952">Map</a></td>
<td class="next">
Next: <a href="31969.html">31969</a>
</td>
</tr>
</table>
<div class="description">31952: Make a character walk up and down until a certain time</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by command lists <a href="51516.html">0</a>, <a href="51772.html">2</a>, <a href="52028.html">4</a>, <a href="52284.html">6</a>, <a href="52540.html">8</a>, <a href="52796.html">10</a>, <a href="53052.html">12</a>, <a href="53308.html">14</a>, <a href="53564.html">16</a>, <a href="57942.html">20</a>, <a href="59136.html">26</a>, <a href="58768.html">32</a>, <a href="58779.html">34</a>, <a href="58798.html">36</a>, <a href="58813.html">38</a>, <a href="59151.html">40</a>, <a href="59488.html">46</a>, <a href="59499.html">48</a>, <a href="59519.html">50</a>, <a href="59530.html">52</a>, <a href="59699.html">72</a>, <a href="59715.html">74</a>, <a href="59724.html">76</a>, <a href="59788.html">80</a>, <a href="59801.html">82</a>, <a href="59812.html">84</a>, <a href="59823.html">86</a> and <a href="58862.html">88</a> to make a character walk up and down within 7 spaces to the left of a fixed location (the 'walkabout origin') until a specified time, e.g. the end of the lesson or when a teacher arrives at the doorway of the classroom.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">Character number (183-209)</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="address-2"><span id="31952"></span>31952</td>
<td class="instruction">CALL <a href="25213.html">25213</a></td>
<td class="comment-1" rowspan="1">Get the next byte (the event identifier) from the command list</td>
</tr>
<tr>
<td class="address-1"><span id="31955"></span>31955</td>
<td class="instruction">LD L,6</td>
<td class="comment-1" rowspan="2">Place it in byte 6 of the character's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="31957"></span>31957</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-2"><span id="31958"></span>31958</td>
<td class="instruction">CALL <a href="31915.html">31915</a></td>
<td class="comment-1" rowspan="1">Has the specified time arrived, and is the character at the walkabout origin?</td>
</tr>
<tr>
<td class="address-1"><span id="31961"></span>31961</td>
<td class="instruction">JP NC,<a href="25484.html">25484</a></td>
<td class="comment-1" rowspan="1">Move to the next command in the command list if so</td>
</tr>
<tr>
<td class="address-1"><span id="31964"></span>31964</td>
<td class="instruction">CALL <a href="25503.html">25503</a></td>
<td class="comment-1" rowspan="1">Otherwise send the character off to another walkabout destination via the routine at <a href="25581.html">25581</a>, and return to the instruction at <a href="31952.html#31967">31967</a> (below) when done</td>
</tr>
<tr>
<td class="address-2"><span id="31967"></span>31967</td>
<td class="instruction">JR 31958</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="31915.html">31915</a>
</td>
<td class="up">Up: <a href="../maps/all.html#31952">Map</a></td>
<td class="next">
Next: <a href="31969.html">31969</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Back to Skool RAM disassembly 20221122</div>
<div class="copyright">&#169; 1985 Microsphere Computer Services Ltd. &#169; 2022 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.8.</div>
<div><a href="../../asm/7CD0.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>