<!DOCTYPE html>
<html>
<head>
<title>Back to Skool: Routine at 61C2</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Back to Skool" src="../images/logo-hex.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="61B4.html">61B4</a>
</td>
<td class="up">Up: <a href="../maps/all.html#61c2">Map</a></td>
<td class="next">
Next: <a href="61F8.html">61F8</a>
</td>
</tr>
</table>
<div class="description">61C2: Scroll the screen left 8 columns</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="6E00.html">6E00</a> and <a href="F5BE.html">F5BE</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="61c2"></span>61C2</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1">8 columns will be scrolled on</td>
</tr>
<tr>
<td class="address-2"><span id="61c4"></span>61C4</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Save the column counter</td>
</tr>
<tr>
<td class="address-1"><span id="61c5"></span>61C5</td>
<td class="instruction">LD HL,$5801</td>
<td class="comment-1" rowspan="4">First shift the attributes one place to the left</td>
</tr>
<tr>
<td class="address-1"><span id="61c8"></span>61C8</td>
<td class="instruction">LD DE,$5800</td>
</tr>
<tr>
<td class="address-1"><span id="61cb"></span>61CB</td>
<td class="instruction">LD BC,$029F</td>
</tr>
<tr>
<td class="address-1"><span id="61ce"></span>61CE</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="61d0"></span>61D0</td>
<td class="instruction">CALL <a href="F841.html">$F841</a></td>
<td class="comment-1" rowspan="1">Scroll the display file one character square to the left</td>
</tr>
<tr>
<td class="address-1"><span id="61d3"></span>61D3</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="2">Adjust the leftmost column of the play area now on screen (held at <a href="7FFF.html">7FFF</a>)</td>
</tr>
<tr>
<td class="address-1"><span id="61d4"></span>61D4</td>
<td class="instruction">LD ($7FFF),A</td>
</tr>
<tr>
<td class="address-1"><span id="61d7"></span>61D7</td>
<td class="instruction">LD HL,$141F</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=20 (bottom row of the screen), <span class="register">L</span>=31 (column at the far right)</td>
</tr>
<tr>
<td class="address-2"><span id="61da"></span>61DA</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="61db"></span>61DB</td>
<td class="instruction">CALL <a href="606C.html">$606C</a></td>
<td class="comment-1" rowspan="1">Print the play area character square at row <span class="register">H</span>, column <span class="register">L</span>=31</td>
</tr>
<tr>
<td class="address-1"><span id="61de"></span>61DE</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="61df"></span>61DF</td>
<td class="instruction">DEC H</td>
<td class="comment-1" rowspan="1">Next row up</td>
</tr>
<tr>
<td class="address-1"><span id="61e0"></span>61E0</td>
<td class="instruction">JP P,$61DA</td>
<td class="comment-1" rowspan="1">Jump back until all 21 squares in the column have been printed</td>
</tr>
<tr>
<td class="address-1"><span id="61e3"></span>61E3</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore the column counter to <span class="register">B</span></td>
</tr>
<tr>
<td class="address-1"><span id="61e4"></span>61E4</td>
<td class="instruction">DJNZ $61C4</td>
<td class="comment-1" rowspan="1">Jump back until 8 columns have been scrolled on</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="61e6"></span>
<div class="comments">
<div class="paragraph">
The screen has been scrolled left 8 columns. Check whether any of the minor characters may be teleported without us noticing.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="61e6"></span>61E6</td>
<td class="instruction">LD A,($7FFF)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=leftmost column of the play area on screen</td>
</tr>
<tr>
<td class="address-1"><span id="61e9"></span>61E9</td>
<td class="instruction">LD B,$05</td>
<td class="comment-1" rowspan="2">5 little boys, starting with 0xC1=little boy no. 4</td>
</tr>
<tr>
<td class="address-1"><span id="61eb"></span>61EB</td>
<td class="instruction">LD H,$C1</td>
</tr>
<tr>
<td class="address-1"><span id="61ed"></span>61ED</td>
<td class="instruction">CP $78</td>
<td class="comment-1" rowspan="1">Is the skool gate in the middle of the screen?</td>
</tr>
<tr>
<td class="address-1"><span id="61ef"></span>61EF</td>
<td class="instruction">JR Z,<a href="61F8.html#622e">$622E</a></td>
<td class="comment-1" rowspan="1">Jump if so (to consider teleporting little boys 4-8)</td>
</tr>
<tr>
<td class="address-1"><span id="61f1"></span>61F1</td>
<td class="instruction">CP $50</td>
<td class="comment-1" rowspan="1">Is the boys' skool door in the middle of the screen?</td>
</tr>
<tr>
<td class="address-1"><span id="61f3"></span>61F3</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Return if not</td>
</tr>
<tr>
<td class="address-1"><span id="61f4"></span>61F4</td>
<td class="instruction">LD H,$BE</td>
<td class="comment-1" rowspan="1">0xBE=little boy no. 1</td>
</tr>
<tr>
<td class="address-1"><span id="61f6"></span>61F6</td>
<td class="instruction">JR <a href="61F8.html#622c">$622C</a></td>
<td class="comment-1" rowspan="1">Consider teleporting little boys 1-3</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="61B4.html">61B4</a>
</td>
<td class="up">Up: <a href="../maps/all.html#61c2">Map</a></td>
<td class="next">
Next: <a href="61F8.html">61F8</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Back to Skool RAM disassembly 20200811</div>
<div class="copyright">&#169; 1985 Microsphere Computer Services Ltd. &#169; 2020 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.2.</div>
<div><a href="../dec/asm/25026.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>