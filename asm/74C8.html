<!DOCTYPE html>
<html>
<head>
<title>Back to Skool: Routine at 74C8</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Back to Skool" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="74C7.html">74C7</a>
</td>
<td class="up">Up: <a href="../maps/all.html#74c8">Map</a></td>
<td class="next">
Next: <a href="7590.html">7590</a>
</td>
</tr>
</table>
<div class="description">74C8: Control the descent of the water, sherry or conker</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
The address of this uninterruptible subcommand routine is placed into bytes 0x11 and 0x12 of a catapult pellet's buffer by the routine at <a href="76AC.html">76AC</a> when it has hit either the tree or a water/sherry-filled cup, and thus released a conker or a drop of water or sherry.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">Falling object's character number (0xD5 or 0xD6)</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="address-2"><span id="74c8"></span>74C8</td>
<td class="instruction">LD L,$02</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="74ca"></span>74CA</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=y-coordinate of the falling object</td>
</tr>
<tr>
<td class="address-1"><span id="74cb"></span>74CB</td>
<td class="instruction">CP $11</td>
<td class="comment-1" rowspan="1">Has the object hit the bottom floor yet?</td>
</tr>
<tr>
<td class="address-1"><span id="74cd"></span>74CD</td>
<td class="instruction">JR NZ,$74DB</td>
<td class="comment-1" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="74cf"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="7380.html">7380</a>, <a href="76AC.html">76AC</a>, <a href="E236.html">E236</a>, <a href="F2E2.html">F2E2</a>, <a href="F862.html">F862</a> and <a href="FA4D.html">FA4D</a> to 'kill' a non-human object (i.e. pellet, frog, desk lid, stinkbomb cloud, water/sherry fired from pistol).
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="74cf"></span>74CF</td>
<td class="instruction">LD L,$12</td>
<td class="comment-1" rowspan="2">Remove the address of this routine from bytes 0x11 and 0x12 of the object's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="74d1"></span>74D1</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="74d3"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="7A16.html">7A16</a> to make a mouse disappear temporarily.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="74d3"></span>74D3</td>
<td class="instruction">CALL <a href="61B4.html">$61B4</a></td>
<td class="comment-1" rowspan="1">Update the SRB for the object's current animatory state and location</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="74d6"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="FA39.html">FA39</a> to hide water from the water pistol.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="74d6"></span>74D6</td>
<td class="instruction">LD L,$01</td>
<td class="comment-1" rowspan="2">Set the object's x-coordinate to 224 (out of sight)</td>
</tr>
<tr>
<td class="address-1"><span id="74d8"></span>74D8</td>
<td class="instruction">LD (HL),$E0</td>
</tr>
<tr>
<td class="address-1"><span id="74da"></span>74DA</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="74db"></span>
<div class="comments">
<div class="paragraph">
The falling object has yet to hit the floor. Has it hit anything else on the way there?
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="74db"></span>74DB</td>
<td class="instruction">CP $0D</td>
<td class="comment-1" rowspan="1">Is the object at the right height to hit someone?</td>
</tr>
<tr>
<td class="address-1"><span id="74dd"></span>74DD</td>
<td class="instruction">JR Z,$74E6</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-2"><span id="74df"></span>74DF</td>
<td class="instruction">CALL <a href="61B4.html">$61B4</a></td>
<td class="comment-1" rowspan="1">Update the SRB for the object's current animatory state and location</td>
</tr>
<tr>
<td class="address-1"><span id="74e2"></span>74E2</td>
<td class="instruction">INC D</td>
<td class="comment-1" rowspan="1">The object will fall one more level</td>
</tr>
<tr>
<td class="address-1"><span id="74e3"></span>74E3</td>
<td class="instruction">JP <a href="6130.html">$6130</a></td>
<td class="comment-1" rowspan="1">Update the object's location and update the SRB</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="74e6"></span>
<div class="comments">
<div class="paragraph">
The object is at the right height to hit someone. Check if it has.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="74e6"></span>74E6</td>
<td class="instruction">LD L,$01</td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at byte 0x01 of the object's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="74e8"></span>74E8</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=falling object's x-coordinate</td>
</tr>
<tr>
<td class="address-1"><span id="74e9"></span>74E9</td>
<td class="instruction">LD D,$11</td>
<td class="comment-1" rowspan="1">This is the y-coordinate of the bottom floor (the only floor on which characters can be hit by a falling object)</td>
</tr>
<tr>
<td class="address-1"><span id="74eb"></span>74EB</td>
<td class="instruction">CALL <a href="74A0.html">$74A0</a></td>
<td class="comment-1" rowspan="1">Check if any of the six adult characters were hit</td>
</tr>
<tr>
<td class="address-1"><span id="74ee"></span>74EE</td>
<td class="instruction">LD L,$00</td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at byte 0x00 of the object's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="74f0"></span>74F0</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=animatory state of the falling object</td>
</tr>
<tr>
<td class="address-1"><span id="74f1"></span>74F1</td>
<td class="instruction">JR Z,$752F</td>
<td class="comment-1" rowspan="1">Jump if an adult character was hit by the falling object</td>
</tr>
<tr>
<td class="address-1"><span id="74f3"></span>74F3</td>
<td class="instruction">CP $37</td>
<td class="comment-1" rowspan="1"><a href="../graphics/as.html#55">0x37</a>: Is the falling object a conker?</td>
</tr>
<tr>
<td class="address-1"><span id="74f5"></span>74F5</td>
<td class="instruction">JR NZ,$74DF</td>
<td class="comment-1" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="74f7"></span>
<div class="comments">
<div class="paragraph">
The falling object is a conker.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="74f7"></span>74F7</td>
<td class="instruction">LD L,$02</td>
<td class="comment-1" rowspan="2">Set the conker's y-coordinate to 17 (bottom floor) for comparison with that of the potential targets</td>
</tr>
<tr>
<td class="address-1"><span id="74f9"></span>74F9</td>
<td class="instruction">LD (HL),$11</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="74fb"></span>
<div class="comments">
<div class="paragraph">
Before calling the routine at <a href="6CAC.html">6CAC</a> to check whether any of the four main kids (besides ERIC) have been hit, <span class="register">D</span> should be set to 206 (BOY WANDER, the first main kid), and <span class="register">B</span> should be set to 4 (the number of kids to check). However, at this point <span class="register">D</span>=0x11 and <span class="register">B</span>=0xCE, which means that instead of checking the character buffers in pages 0xCE-0xD1, we end up checking pages 0x11-0xDE. In that range, only pages 0xB7-0xD6 contain character buffers; treating the other pages in RAM as if they contained character buffers could lead to data/code corruption. Needless to say, this is a <a href="../reference/bugs.html#conkerMD">bug</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="74fb"></span>74FB</td>
<td class="instruction">CALL <a href="6CAC.html">$6CAC</a></td>
<td class="comment-1" rowspan="1">Check whether anyone was hit by the conker</td>
</tr>
<tr>
<td class="address-1"><span id="74fe"></span>74FE</td>
<td class="instruction">LD L,$02</td>
<td class="comment-1" rowspan="2">Set the conker's y-coordinate back to 13</td>
</tr>
<tr>
<td class="address-1"><span id="7500"></span>7500</td>
<td class="instruction">LD (HL),$0D</td>
</tr>
<tr>
<td class="address-1"><span id="7502"></span>7502</td>
<td class="instruction">JR C,$74DF</td>
<td class="comment-1" rowspan="1">Jump if nobody was hit by the conker</td>
</tr>
<tr>
<td class="address-1"><span id="7504"></span>7504</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=number of the character hit by the conker</td>
</tr>
<tr>
<td class="address-1"><span id="7505"></span>7505</td>
<td class="instruction">CP $CF</td>
<td class="comment-1" rowspan="1">Was it BOY WANDER (0xCE)?</td>
</tr>
<tr>
<td class="address-1"><span id="7507"></span>7507</td>
<td class="instruction">JR C,$751E</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="7509"></span>7509</td>
<td class="instruction">CP $D1</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="750b"></span>750B</td>
<td class="instruction">LD A,$0A</td>
<td class="comment-1" rowspan="1">ERIC gets 100 points for conkering ANGELFACE or EINSTEIN</td>
</tr>
<tr>
<td class="address-1"><span id="750d"></span>750D</td>
<td class="instruction">JR NC,$751E</td>
<td class="comment-1" rowspan="1">Jump unless ANGELFACE (0xCF) or EINSTEIN (0xD0) was hit</td>
</tr>
<tr>
<td class="address-1"><span id="750f"></span>750F</td>
<td class="instruction">CALL <a href="73B5.html">$73B5</a></td>
<td class="comment-1" rowspan="1">Add 100 to the score and print it</td>
</tr>
<tr>
<td class="address-1"><span id="7512"></span>7512</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="7513"></span>7513</td>
<td class="instruction">LD D,$28</td>
<td class="comment-1" rowspan="4">Make a sound effect with <span class="register">A</span>=0x07 and <span class="register">C</span>=0x12 (border alternating white and cyan)</td>
</tr>
<tr>
<td class="address-1"><span id="7515"></span>7515</td>
<td class="instruction">LD BC,$2812</td>
</tr>
<tr>
<td class="address-1"><span id="7518"></span>7518</td>
<td class="instruction">LD A,$07</td>
</tr>
<tr>
<td class="address-1"><span id="751a"></span>751A</td>
<td class="instruction">CALL <a href="748C.html">$748C</a></td>
</tr>
<tr>
<td class="address-1"><span id="751d"></span>751D</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="751e"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="7842.html">7842</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="751e"></span>751E</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="751f"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="76AC.html">76AC</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="751f"></span>751F</td>
<td class="instruction">CALL $74CF</td>
<td class="comment-1" rowspan="1">Terminate the object</td>
</tr>
<tr>
<td class="address-1"><span id="7522"></span>7522</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="7523"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="7813.html">7813</a> to knock a character over.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="7523"></span>7523</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="7524"></span>7524</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=number of the character hit by the object or fist</td>
</tr>
<tr>
<td class="address-1"><span id="7525"></span>7525</td>
<td class="instruction">CP $D2</td>
<td class="comment-1" rowspan="1">Was it ERIC?</td>
</tr>
<tr>
<td class="address-1"><span id="7527"></span>7527</td>
<td class="instruction">JR NZ,$7547</td>
<td class="comment-1" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="7529"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="5F08.html">5F08</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="7529"></span>7529</td>
<td class="instruction">LD A,$80</td>
<td class="comment-1" rowspan="2">Set bit 7 at <a href="7FFB.html">7FFB</a>: ERIC has been knocked down</td>
</tr>
<tr>
<td class="address-1"><span id="752b"></span>752B</td>
<td class="instruction">LD ($7FFB),A</td>
</tr>
<tr>
<td class="address-1"><span id="752e"></span>752E</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="752f"></span>
<div class="comments">
<div class="paragraph">
An adult character was hit by the falling object.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="752f"></span>752F</td>
<td class="instruction">CP $37</td>
<td class="comment-1" rowspan="1">Is the falling object a conker?</td>
</tr>
<tr>
<td class="address-1"><span id="7531"></span>7531</td>
<td class="instruction">JR NZ,$7552</td>
<td class="comment-1" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="7533"></span>
<div class="comments">
<div class="paragraph">
An adult character has been hit by either a conker or a drop of water or sherry.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="7533"></span>7533</td>
<td class="instruction">LD C,$00</td>
<td class="comment-1" rowspan="1">Point <span class="register">BC</span> at byte 0x00 of the character's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="7535"></span>7535</td>
<td class="instruction">LD A,(BC)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=animatory state of the adult character hit by the object</td>
</tr>
<tr>
<td class="address-1"><span id="7536"></span>7536</td>
<td class="instruction">AND $07</td>
<td class="comment-1" rowspan="2">Is the character already sitting on the floor?</td>
</tr>
<tr>
<td class="address-1"><span id="7538"></span>7538</td>
<td class="instruction">CP $06</td>
</tr>
<tr>
<td class="address-1"><span id="753a"></span>753A</td>
<td class="instruction">JP Z,$74DF</td>
<td class="comment-1" rowspan="1">Jump if so (the object will continue to fall)</td>
</tr>
<tr>
<td class="address-1"><span id="753d"></span>753D</td>
<td class="instruction">LD C,$12</td>
<td class="comment-1" rowspan="3">Is there an uninterruptible subcommand routine address in bytes 0x11 and 0x12 of the character's buffer (which would prevent the character from being knocked over)?</td>
</tr>
<tr>
<td class="address-1"><span id="753f"></span>753F</td>
<td class="instruction">LD A,(BC)</td>
</tr>
<tr>
<td class="address-1"><span id="7540"></span>7540</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="7541"></span>7541</td>
<td class="instruction">JP NZ,$74DF</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="7544"></span>7544</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="7545"></span>7545</td>
<td class="instruction">JR $751F</td>
<td class="comment-1" rowspan="1">Terminate the object and knock the character over</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="7547"></span>
<div class="comments">
<div class="paragraph">
This section of code sets up the uninterruptible subcommand that will control the character who has been knocked over until it's time for him to get up.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="7547"></span>7547</td>
<td class="instruction">LD L,$11</td>
<td class="comment-1" rowspan="4">Place the address of the uninterruptible subcommand routine at <a href="7596.html">7596</a> into bytes 0x11 and 0x12 of the stricken character's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="7549"></span>7549</td>
<td class="instruction">LD (HL),$96</td>
</tr>
<tr>
<td class="address-1"><span id="754b"></span>754B</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address-1"><span id="754c"></span>754C</td>
<td class="instruction">LD (HL),$75</td>
</tr>
<tr>
<td class="address-1"><span id="754e"></span>754E</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="2">Initialise the knockout delay counter in byte 0x13 of the character's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="754f"></span>754F</td>
<td class="instruction">LD (HL),$13</td>
</tr>
<tr>
<td class="address-1"><span id="7551"></span>7551</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="7552"></span>
<div class="comments">
<div class="paragraph">
An adult character has been hit by a drop of water or sherry.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="7552"></span>7552</td>
<td class="instruction">LD DE,$7F00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="7555"></span>7555</td>
<td class="instruction">CP $1F</td>
<td class="comment-1" rowspan="1"><a href="../graphics/as.html#31">0x1F</a>: Is the falling object a drop of water?</td>
</tr>
<tr>
<td class="address-1"><span id="7557"></span>7557</td>
<td class="instruction">JR Z,$755B</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="7559"></span>7559</td>
<td class="instruction">LD E,$04</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="755b"></span>755B</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=number of the character who was hit by the drop of water/sherry</td>
</tr>
<tr>
<td class="address-1"><span id="755c"></span>755C</td>
<td class="instruction">CP $CC</td>
<td class="comment-1" rowspan="1">Is the stricken character one of the male teachers?</td>
</tr>
<tr>
<td class="address-1"><span id="755e"></span>755E</td>
<td class="instruction">JR NC,$7533</td>
<td class="comment-1" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="address-1"><span id="7560"></span>7560</td>
<td class="instruction">SUB $24</td>
<td class="comment-1" rowspan="3">Point <span class="register">DE</span> at the relevant combination letter or number in one of the tables at <a href="7FA4.html">7FA4</a> and <a href="7FA4.html#7fa8">7FA8</a></td>
</tr>
<tr>
<td class="address-1"><span id="7562"></span>7562</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="address-1"><span id="7563"></span>7563</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address-1"><span id="7564"></span>7564</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">(<span class="register">HL</span>)=combination letter/number held by the teacher just knocked down</td>
</tr>
<tr>
<td class="address-1"><span id="7565"></span>7565</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment-1" rowspan="1">Has ERIC already discovered this one?</td>
</tr>
<tr>
<td class="address-1"><span id="7567"></span>7567</td>
<td class="instruction">JR NZ,$7572</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="7569"></span>7569</td>
<td class="instruction">SET 7,(HL)</td>
<td class="comment-1" rowspan="1">Signal: ERIC has discovered this combination letter/number</td>
</tr>
<tr>
<td class="address-1"><span id="756b"></span>756B</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="756c"></span>756C</td>
<td class="instruction">LD A,$14</td>
<td class="comment-1" rowspan="2">Add 200 to the score and print it</td>
</tr>
<tr>
<td class="address-1"><span id="756e"></span>756E</td>
<td class="instruction">CALL <a href="73B5.html">$73B5</a></td>
</tr>
<tr>
<td class="address-1"><span id="7571"></span>7571</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="7572"></span>7572</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="2"><span class="register">A</span>=character code of the combination number/letter just revealed</td>
</tr>
<tr>
<td class="address-1"><span id="7573"></span>7573</td>
<td class="instruction">AND $7F</td>
</tr>
<tr>
<td class="address-1"><span id="7575"></span>7575</td>
<td class="instruction">LD ($7F8A),A</td>
<td class="comment-1" rowspan="1">Store this in the first byte of message <a href="7F8A.html">0x05</a>, which is used as a submessage of message <a href="E9F9.html">0x0E</a>: '[5]^ '</td>
</tr>
<tr>
<td class="address-1"><span id="7578"></span>7578</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="7579"></span>7579</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="757a"></span>757A</td>
<td class="instruction">LD H,B</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=character number of the teacher just struck (0xC8-0xCB)</td>
</tr>
<tr>
<td class="address-1"><span id="757b"></span>757B</td>
<td class="instruction">CALL <a href="7400.html">$7400</a></td>
<td class="comment-1" rowspan="1">Get the coordinates of this teacher's head</td>
</tr>
<tr>
<td class="address-1"><span id="757e"></span>757E</td>
<td class="instruction">CALL <a href="6A8C.html">$6A8C</a></td>
<td class="comment-1" rowspan="1">Save the area of the screen that will be overwritten by the letter/number message box</td>
</tr>
<tr>
<td class="address-1"><span id="7581"></span>7581</td>
<td class="instruction">JR C,$758B</td>
<td class="comment-1" rowspan="1">Jump if the teacher is off-screen</td>
</tr>
<tr>
<td class="address-1"><span id="7583"></span>7583</td>
<td class="instruction">LD BC,$0E46</td>
<td class="comment-1" rowspan="3">Print the letter/number message box (message number <span class="register">B</span>=<a href="E9F9.html">0x0E</a>) and make a sound effect</td>
</tr>
<tr>
<td class="address-1"><span id="7586"></span>7586</td>
<td class="instruction">LD A,$06</td>
</tr>
<tr>
<td class="address-1"><span id="7588"></span>7588</td>
<td class="instruction">CALL <a href="7414.html#7473">$7473</a></td>
</tr>
<tr>
<td class="address-2"><span id="758b"></span>758B</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore the stricken character's number to <span class="register">B</span></td>
</tr>
<tr>
<td class="address-1"><span id="758c"></span>758C</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore the falling object's character number to <span class="register">H</span></td>
</tr>
<tr>
<td class="address-1"><span id="758d"></span>758D</td>
<td class="instruction">JP $7533</td>
<td class="comment-1" rowspan="1">Terminate the falling object and knock the character over</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="74C7.html">74C7</a>
</td>
<td class="up">Up: <a href="../maps/all.html#74c8">Map</a></td>
<td class="next">
Next: <a href="7590.html">7590</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Back to Skool RAM disassembly 20191115</div>
<div class="copyright">&#169; 1985 Microsphere Computer Services Ltd. &#169; 2019 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.0.</div>
<div><a href="../dec/asm/29896.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>