<!DOCTYPE html>
<html>
<head>
<title>Back to Skool: Routine at F54A</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Back to Skool" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="F532.html">F532</a></span></td>
<td class="up">Up: <a href="../maps/all.html#f54a">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="F55F.html">F55F</a></span></td>
</tr>
</table>
<div class="description">F54A: Make MR WACKER find the truant ERIC</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
The address of this interruptible subcommand routine is placed into bytes 0x09 and 0x0A of MR WACKER's buffer by the routine at <a href="7D36.html">7D36</a> after ALBERT has spotted ERIC trying to escape and raised the alarm.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">0xC8 (MR WACKER)</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f54a"></span>F54A</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,$1D</td>
<td class="comment-11" rowspan="2">Set bit 7 of byte 0x1D of MR WACKER's buffer, making him run</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f54c"></span>F54C</td>
<td class="bytes-0"></td>
<td class="instruction">SET 7,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f54e"></span>F54E</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,$00</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at byte 0x00 of MR WACKER's buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f550"></span>F550</td>
<td class="bytes-0"></td>
<td class="instruction">BIT 0,(HL)</td>
<td class="comment-11" rowspan="1">Is MR WACKER midstride?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f552"></span>F552</td>
<td class="bytes-0"></td>
<td class="instruction">JP NZ,<a href="6558.html#655e">$655E</a></td>
<td class="comment-11" rowspan="1">Finish the stride if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f555"></span>
<div class="comments">
<div class="paragraph">
Now check whether a command list restart has been requested. This request will have been made if the lesson in which MR WACKER started chasing ERIC has ended, and the next lesson has just begun (see <a href="F74D.html">F74D</a>).
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f555"></span>F555</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,$1D</td>
<td class="comment-11" rowspan="2">Has a command list restart been requested (i.e. should MR WACKER end the chase now)?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f557"></span>F557</td>
<td class="bytes-0"></td>
<td class="instruction">BIT 0,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f559"></span>F559</td>
<td class="bytes-0"></td>
<td class="instruction">JP NZ,<a href="7E7B.html#7e8f">$7E8F</a></td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f55c"></span>F55C</td>
<td class="bytes-0"></td>
<td class="instruction">JP <a href="6558.html">$6558</a></td>
<td class="comment-11" rowspan="1">Otherwise continue the hunt for ERIC</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="F532.html">F532</a></span></td>
<td class="up">Up: <a href="../maps/all.html#f54a">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="F55F.html">F55F</a></span></td>
</tr>
</table>
<footer>
<div class="release">The complete Back to Skool RAM disassembly 20190617</div>
<div class="copyright">&#169; 1985 Microsphere Computer Services Ltd. &#169; 2019 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 7.2.</div>
<div><a href="../dec/asm/62794.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>